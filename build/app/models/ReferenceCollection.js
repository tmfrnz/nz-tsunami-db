define(["jquery","underscore","backbone","./ReferenceModel"],function(e,t,n,i){return n.Collection.extend({model:i,initialize:function(e,t){this.options=t||{}},toCSV:function(){var e="",n=t.without(Object.keys(this.models[0].attributes),"attributeMap","sort");return e+=n.join(","),e+="\n",t.each(this.models,function(i){t.each(n,function(t,n){n>0&&(e+=","),e+='"',e+=i.get(t)?i.get(t).toString().replace(/"/g,'""'):"",e+='"'}),e+="\n"}),e}})});